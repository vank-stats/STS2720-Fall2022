/* Code to read in data for Alamance county bridges */

data bridges;
input COUNTY $ NUM ROUTE $ YEARBUILT STRUCTURALLYDEFICIENT $ FUNCTIONALLYOBSOLETE $ SR;
cards;
ALAMANCE 2 SR1529 1998 N FO 80.5
ALAMANCE 3 SR1529 1954 SD FO 15.9
ALAMANCE 6 SR1504 2004 N N 98.7
ALAMANCE 7 SR1504 2009 N N 97.7
ALAMANCE 11 NC54 2001 N N 98.1
ALAMANCE 12 NC62 1999 N N 83
ALAMANCE 13 SR1530 2002 N N 92.9
ALAMANCE 14 NC87 1929 N N 79.5
ALAMANCE 15 SR1530 1957 N N 50.8
ALAMANCE 16 NC119 1994 N N 98
ALAMANCE 18 SR1561 2004 N N 98.9
ALAMANCE 22 SR1001 1951 N N 50.2
ALAMANCE 23 SR1001 1991 N FO 80.7
ALAMANCE 24 SR1581 1960 N N 78.1
ALAMANCE 26 NC62 1949 N FO 53.8
ALAMANCE 27 SR1002 2004 N N 97.6
ALAMANCE 28 SR1587 1986 N N 80.7
ALAMANCE 31 SR1584 2005 N N 99
ALAMANCE 32 SR1582 1955 SD FO 20.7
ALAMANCE 33 NC49 1980 N N 88.6
ALAMANCE 34 NC54 1973 N N 81.8
ALAMANCE 35 NC62 1958 N N 73.7
ALAMANCE 36 SR1613 1960 N N 58.2
ALAMANCE 37 SR1611 1954 N FO 46.6
ALAMANCE 38 SR1611 1960 N N 63.3
ALAMANCE 39 SR1584 1995 N N 94
ALAMANCE 40 NC87 1929 N N 79
ALAMANCE 41 SR1002 1960 N N 63.3
ALAMANCE 42 SR1002 1960 N N 57.8
ALAMANCE 43 SR1763 1995 N N 88.9
ALAMANCE 44 SR1768 1968 SD N 38
ALAMANCE 45 SR1002 2008 N N 99.8
ALAMANCE 47 SR1301 2004 N N 98
ALAMANCE 51 SR1712 1957 N N 53.5
ALAMANCE 52 SR1729 1959 N N 63.3
ALAMANCE 54 SR1754 1989 N N 84.7
ALAMANCE 56 NC49 1985 N N 95.4
ALAMANCE 58 SR1927 1990 N N 94.6
ALAMANCE 59 SR1927 1963 N FO 63.2
ALAMANCE 60 SR1921 2004 N N 98.4
ALAMANCE 61 SR1921 1990 N N 82.7
ALAMANCE 62 SR1920 1989 N N 87.9
ALAMANCE 63 SR1917 1990 N N 91.9
ALAMANCE 64 SR1912 1956 SD FO 21.6
ALAMANCE 66 SR1910 1963 SD N 29
ALAMANCE 67 SR1940 1986 N FO 80.4
ALAMANCE 68 SR1928 1972 N FO 56.5
ALAMANCE 69 NC49 1982 N N 95.7
ALAMANCE 70 NC54 1973 N N 98.5
ALAMANCE 71 NC62 1967 N N 96.4
ALAMANCE 72 NC87 1928 N N 65.3
ALAMANCE 73 SR1928 1969 SD N 58.7
ALAMANCE 75 SR1158 1993 N N 99
ALAMANCE 76 I40 1992 N N 86
ALAMANCE 77 SR1007 1941 SD FO 10.2
ALAMANCE 79 SR2131 1999 N N 88.8
ALAMANCE 81 US70 1938 N FO 64.6
ALAMANCE 82 SR2135 1952 SD FO 13.9
ALAMANCE 83 SR2135 1987 N N 82.7
ALAMANCE 84 SR2158 1986 N N 93.5
ALAMANCE 85 SR2158 1967 N FO 55.3
ALAMANCE 86 SR2171 1990 N FO 84.2
ALAMANCE 91 SR2153 1993 N N 88
ALAMANCE 92 NC49 1923 N FO 51.3
ALAMANCE 93 SR2109 1996 N N 95.8
ALAMANCE 94 SR2158 2005 N N 80.9
ALAMANCE 95 SR2116 1963 N FO 66
ALAMANCE 96 SR2116 2009 N N 100
ALAMANCE 97 SR2116 1955 SD N 27
ALAMANCE 98 SR1003 1974 N N 69.4
ALAMANCE 101 SR1005 1996 N N 96.5
ALAMANCE 102 SR2181 2010 N N 95.9
ALAMANCE 103 SR2182 1958 N FO 67.9
ALAMANCE 105 SR2174 1972 N N 64.8
ALAMANCE 106 SR2312 2006 N N 95.7
ALAMANCE 107 SR2309 1994 N N 90.2
ALAMANCE 109 SR2309 1965 N FO 77.4
ALAMANCE 111 SR2351 2004 N N 98.9
ALAMANCE 112 NC87 1949 SD FO 38.4
ALAMANCE 113 SR1003 1950 N N 72.6
ALAMANCE 114 SR1003 1950 N N 66.7
ALAMANCE 115 SR1154 1993 N N 99.4
ALAMANCE 119 NC87 1949 N FO 42.1
ALAMANCE 120 I40 1993 N N 96
ALAMANCE 121 SR1136 1963 SD FO 49.3
ALAMANCE 124 SR1130 1994 N N 94.8
ALAMANCE 125 SR2327 1953 N FO 57.9
ALAMANCE 126 NC87 1949 SD FO 17.7
ALAMANCE 128 SR2369 1950 N FO 55.4
ALAMANCE 130 I40 1991 N FO 94
ALAMANCE 134 SR2356 1960 SD N 36.8
ALAMANCE 135 SR2356 1957 N FO 45.9
ALAMANCE 136 SR2351 1972 N N 84.2
ALAMANCE 137 SR2351 1954 SD FO 21.5
ALAMANCE 140 SR2100 1991 N N 84
ALAMANCE 141 SR1005 1950 N N 70.1
ALAMANCE 142 I40 1991 N N 84
ALAMANCE 144 SR2361 1955 N FO 47.5
ALAMANCE 146 SR2363 1955 N FO 55.6
ALAMANCE 148 I40 1958 N N 73
ALAMANCE 149 SR2363 2010 N N 94.9
ALAMANCE 151 SR2307 1955 SD FO 20.9
ALAMANCE 152 SR2307 1963 N FO 48
ALAMANCE 153 SR2371 1950 N N 52.6
ALAMANCE 154 SR2365 1955 N FO 47.5
ALAMANCE 155 SR1928 1993 N N 100
ALAMANCE 160 SR1122 1960 SD FO 21.5
ALAMANCE 161 SR1124 1954 SD FO 18
ALAMANCE 162 SR1113 1956 SD FO 26.1
ALAMANCE 163 I40 1994 N N 93
ALAMANCE 164 SR1113 1949 SD N 20.3
ALAMANCE 165 SR1131 1970 N N 81.9
ALAMANCE 167 SR1117 1999 N N 94
ALAMANCE 168 SR1148 1978 N FO 66.4
ALAMANCE 169 SR1148 1953 SD FO 14.9
ALAMANCE 170 SR1212 1952 N N 39.7
ALAMANCE 172 SR1149 1985 N N 82
ALAMANCE 173 SR1149 1960 SD FO 11.8
ALAMANCE 174 SR2123 1993 N N 89.9
ALAMANCE 176 SR1981 1994 N N 98
ALAMANCE 177 SR1007 1994 N N 99
ALAMANCE 178 SR1154 1970 SD N 35.5
ALAMANCE 190 SR1005 1950 N N 69.6
ALAMANCE 194 SR2328 1978 N N 87.4
ALAMANCE 195 SR2304 1996 N FO 81
ALAMANCE 200 SR1110 1953 N N 75.5
ALAMANCE 207 SR1522 1955 N N 55.7
ALAMANCE 210 SR2171 1990 N FO 84.2
ALAMANCE 238 SR2128 1954 N FO 60.5
ALAMANCE 240 SR1754 2006 N N 96.9
ALAMANCE 245 SR2374 1958 N N 46
ALAMANCE 248 SR2354 1958 SD FO 21.8
ALAMANCE 253 SR2178 1953 N N 49.2
ALAMANCE 254 SR2104 1960 N FO 69.2
ALAMANCE 258 SR1522 1955 N N 71.9
ALAMANCE 261 SR1750 1994 N N 96.9
ALAMANCE 267 SR1571 1958 N N 53.9
ALAMANCE 270 SR1552 1958 N N 65.9
ALAMANCE 280 SR1134 1956 SD FO 30.7
ALAMANCE 293 SR2123 1973 SD N 91.9
ALAMANCE 301 SR2364 1961 N N 80.8
ALAMANCE 307 SR1936 1966 N N 59.3
ALAMANCE 323 SR1558 1986 N N 91.7
ALAMANCE 326 SR1129 1998 N N 88.9
ALAMANCE 333 SR2183 1962 SD N 19.1
ALAMANCE 336 SR1569 1950 N N 66
ALAMANCE 355 US70W 1970 N N 66.5
ALAMANCE 364 SR2424 1991 N N 94
ALAMANCE 379 US70 1993 N N 84
;



/* Using yearbuilt to predict structural rating (with prediction intervals) */

proc reg data = bridges;
model SR = yearbuilt / cli;
run;



/* 90% confidence interval for the population mean structural rating */

PROC TTEST DATA = bridges ALPHA = 0.10;
VAR SR;
RUN;



/* Hypothesis test for H0: mu = 75 vs. Ha: mu < 75 */

PROC TTEST DATA = bridges H0 = 75 SIDES = L;
VAR SR;
RUN;



/* 99% confidence interval for difference in population mean structural rating
   between bridges that are (FO) and are not (N) functionally obsolete */
  
PROC TTEST DATA = bridges alpha = 0.01;
CLASS FUNCTIONALLYOBSOLETE;
VAR SR;
RUN;



/* Hypothesis test for H0: mu1-mu2 = 0 vs. Ha: mu1-mu2 != 0
   Comparing structural rating for functionally obsolete (FO) and not (N) bridges */
  
PROC TTEST DATA = bridges H0 = 0 SIDES = 2;
CLASS FUNCTIONALLYOBSOLETE;
VAR SR;
RUN;



/* 95% CI for population proportion of bridges that are structurally deficient (SD) */

PROC FREQ DATA = bridges;
TABLES STRUCTURALLYDEFICIENT / BINOMIAL(LEVEL = "SD") ALPHA = 0.05;
RUN;



/* Hypothesis test that 30% of bridges are functionallyobsolete H0: p = 0.3 */

PROC FREQ DATA = bridges;
TABLES functionallyobsolete / BINOMIAL(P = 0.3 LEVEL = "FO");
RUN;



/* Creating a bridge quality variable with three levels */

data bridges;
set bridges;
if structuallydeficient = "N" or functionallyobsolete = "N" then quality = "medium";
if structurallydeficient = "N" and functionallyobsolete = "N" then quality = "good";
if structurallydeficient = "SD" and functionallyobsolete = "FO" then quality = "bad";
run;

/* ANOVA test of population mean structural rating by bridge quality
   with simulatenous 95% confidence intervals */

proc glm data = bridges alpha = 0.05;
class quality;
model sr = quality;
lsmeans quality / cl adjust = bon;
run;



/* Chi-Squared test for relationship between functionallyobsolete and structurallydeficient */

PROC FREQ DATA = bridges;
TABLES functionallyobsolete * structurallydeficient / expected cellchi2 chisq;
RUN;
